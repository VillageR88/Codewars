const fs = require("fs")
const gulp = require("gulp")
const request = require("request")
const shell = require("gulp-shell")
const pkg = require("./package.json")

gulp.task("download-nunit", 
  shell.task(`nuget.exe install NUnit.ConsoleRunner -Version ${pkg.version} -OutputDirectory packages`)
)

gulp.task("download-nuget", function(done) {
  if (fs.existsSync("nuget.exe")) {
    return done()
  }

  request.get("http://nuget.org/nuget.exe")
    .pipe(fs.createWriteStream("nuget.exe"))
    .on("close", done)
})